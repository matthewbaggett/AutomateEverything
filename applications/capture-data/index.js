const php = require('phpjs');const redis = require("redis");const mysql = require("mysql");const moment = require('moment');const sprintf = require("sprintf-js").sprintf;var environment = php.ksort(process.env);// Connect to REDISvar redisReceiver = redis.createClient({    host: environment.REDIS_PORT_6379_TCP_ADDR,    port: environment.REDIS_PORT_6379_TCP_PORT});var mysqlConnectionOptions = {    connectionLimit: 10,    host: process.env.MYSQL_PORT_3306_TCP_ADDR,    port: process.env.MYSQL_PORT_3306_TCP_PORT,    user: process.env.MYSQL_ENV_MYSQL_USER,    password: process.env.MYSQL_ENV_MYSQL_PASSWORD,    database: process.env.MYSQL_ENV_MYSQL_DATABASE};console.log(mysqlConnectionOptions);var mysqlPool = mysql.createPool(mysqlConnectionOptions);redisReceiver.on("message", function(channel, message){    console.log("Message on channel " + channel + ": " + message);    message = JSON.parse(message);    if(channel == "electricity"){        mysqlPool.getConnection(function(err, connection) {            var timestamp = moment().format('YYYY-MM-DD HH:mm:ss');            var query = sprintf(                "INSERT INTO `power` (`watts`, `created`) VALUES (%d, '%s')",                message.watts,                timestamp            );            connection.query(query, function(err, rows){                console.log("Wrote power consumption (" + message.watts + ") to database.");                connection.release();            });        });    }});redisReceiver.subscribe("electricity");