const php = require('phpjs');const redis = require("redis");var environment = php.ksort(process.env);var previousWattage = 0;// Connect to REDISvar redisSender = redis.createClient({    host: environment.REDIS_PORT_6379_TCP_ADDR,    port: environment.REDIS_PORT_6379_TCP_PORT});var redisReceiver = redis.createClient({    host: environment.REDIS_PORT_6379_TCP_ADDR,    port: environment.REDIS_PORT_6379_TCP_PORT});redisReceiver.on("message", function(channel, message){    console.log("Message on channel " + channel + ": " + message);    message = JSON.parse(message);    if(channel == "electricity"){        console.log("Power alert! Current draw: " + message.watts + " watts");        if(previousWattage != 0){            if(message.watts > previousWattage){                console.log("Increase by " + (message.watts - previousWattage) + " watts");                redisSender.publish('lights_request', JSON.stringify({                    scope: 'all',                    colour: {                        red: 1.0,                        green: 0.0,                        blue: 0.0,                        brightness: 1.0                    }                }));            }else if(message.watts < previousWattage){                console.log("Decrease by " + (previousWattage - message.watts) + " watts");                redisSender.publish('lights_request', JSON.stringify({                    scope: 'all',                    colour: {                        red: 0.0,                        green: 1.0,                        blue: 0.0,                        brightness: 1.0                    }                }));            }else{                console.log("Neutral");                redisSender.publish('lights_request', JSON.stringify({                    scope: 'all',                    colour: {                        white: "5000K",                        brightness: 1.0                    }                }));            }        }        previousWattage = message.watts;    }});redisReceiver.subscribe("electricity");